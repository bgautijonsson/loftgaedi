
<!-- README.md is generated from README.Rmd. Please edit that file -->

# loftgaedi

<!-- badges: start -->
<!-- badges: end -->

The purpose of this package is to make air quality data from
[loftgaedi.is](https://loftgaedi.is) easily accessible to R users. It
does this by providing helper functions -`get_latest()`, `get_dates()`
and `get_stations()`- that interface with the API and transform the
content to tidy tables.

## Installation

You can install the development version of loftgaedi like so:

``` r
remotes::install("bgautijonsson/loftgaedi")
```

## Examples

``` r
library(loftgaedi)
```

### `get_latest()`

This function provides all air quality data that was recorded in the
last 24 hours, updated hourly at approximately 17 minutes past.

``` r
d <- get_latest()

dplyr::glimpse(d)
#> Rows: 1,536
#> Columns: 8
#> $ station      <chr> "Akureyri Strandgata (við Hof)", "Akureyri Strandgata (vi…
#> $ station_id   <chr> "STA-IS0052A", "STA-IS0052A", "STA-IS0052A", "STA-IS0052A…
#> $ unit         <chr> "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg…
#> $ resolution   <chr> "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h…
#> $ verification <chr> "óyfirfarin", "óyfirfarin", "óyfirfarin", "óyfirfarin", "…
#> $ time         <dttm> 2023-01-21 13:00:00, 2023-01-21 12:00:00, 2023-01-21 11:…
#> $ variable     <chr> "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO…
#> $ value        <dbl> 4.454170, 4.916660, 4.022920, 2.106250, 1.495830, 1.35208…
```

### `get_dates(dates)`

This function fetches data from the provided dates. The `dates` input
must be a vector of dates or coercible to date format.

``` r
my_dates <- seq.Date(from = as.Date("2023-01-01"), to = as.Date("2023-01-11"), by = "days")
d <- get_dates(my_dates)

dplyr::glimpse(d)
#> Rows: 17,496
#> Columns: 8
#> $ station      <chr> "Akureyri Strandgata (við Hof)", "Akureyri Strandgata (vi…
#> $ station_id   <chr> "STA-IS0052A", "STA-IS0052A", "STA-IS0052A", "STA-IS0052A…
#> $ unit         <chr> "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg/m3", "µg…
#> $ resolution   <chr> "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h", "1h…
#> $ verification <chr> "óyfirfarin", "óyfirfarin", "óyfirfarin", "óyfirfarin", "…
#> $ time         <dttm> 2023-01-01 23:00:00, 2023-01-01 22:00:00, 2023-01-01 21:…
#> $ variable     <chr> "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO…
#> $ value        <dbl> 2.2875000, 2.0458300, 2.2520800, 2.3125000, 2.1145800, 2.…
```

### `get_stations()`

This function provides basic information about all stations *(location,
activity window, altitude etc.)* in the data.

``` r
d <- get_stations()

dplyr::glimpse(d)
#> Rows: 59
#> Columns: 14
#> $ name                   <chr> "Flúðir Heimaland (Suðurland)", "Reykjanes Hólm…
#> $ local_id               <chr> "STA-IS0016A", "STA-IS0038A", "STA-IS0050A", "S…
#> $ municipality           <chr> "Flúðir", "Reykjanesbær", "Húsavík", "Reykjavík…
#> $ activity_begin         <chr> "2010-04-29", "2016-02-04", "2016-12-01", "2001…
#> $ activity_end           <chr> "2010-07-07", "2018-06-05", NA, "2010-12-31", N…
#> $ network_name           <chr> "Environment Agency of Iceland", "Sameinað Síli…
#> $ network_local_id       <chr> "NET-IS002A", "NET-IS008A", "NET-IS012A", "NET-…
#> $ station_classification <chr> "background", "industrial", "industrial", "back…
#> $ area_classification    <chr> "rural", "suburban", "suburban", "suburban", "u…
#> $ altitude               <int> 10, 10, 47, 50, 19, 41, 65, 160, 83, 624, 328, …
#> $ latitude               <chr> "63.599753", "64.013617", "66.054858", "64.1399…
#> $ longitude              <chr> "-19.97900", "-22.575667", "-17.347550", "-21.7…
#> $ mobile                 <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ parameters             <chr> "{NO,PM2.5,NO2,PM10,\"NOX as NO2\"}", "{PAH,PM2…
```
